/*
 * Quick test configuration for continuous integration
 * Uses minimal resources and pre-built small references
 */

params {
    input = "${projectDir}/test_data/Sample_test.txt"
    outdir = "results_quick_test"
    
    // Use small test references  
    transcript_fasta = "${projectDir}/test_refs/test_transcripts.fa"
    gtf = "${projectDir}/test_refs/test_genes.gtf"
    reference = "${projectDir}/test_refs/gene_ref.txt"
    
    // Speed optimizations
    pseudo_aligner = 'kallisto'
    seq_mode = 'SE'
    
    // Skip time-consuming steps
    skip_fastqc = true
    skip_trimming = true
    skip_multiqc = true  // Skip for speed
    
    // Minimal kallisto settings
    extra_kallisto_quant_args = '-b 5 --single-overhang'  // Very small bootstrap
    kallisto_quant_fraglen = 200
    kallisto_quant_fraglen_sd = 200
    
    // Quick resource limits
    max_cpus = 1
    max_memory = '2.GB'
    max_time = '30.min'
}

process {
    // Minimal resource allocation for speed
    withName: 'KALLISTO_INDEX' {
        memory = '1.GB'
        cpus = 1
        time = '5.min'
    }
    withName: 'KALLISTO_QUANT' {
        memory = '1.GB'  
        cpus = 1
        time = '5.min'
    }
    withName: 'DESEQ2_NORM_QC' {
        memory = '1.GB'
        cpus = 1
        time = '10.min'
    }
    
    // Fail fast for CI
    errorStrategy = 'terminate'
    maxRetries = 0
}