params {
    input = "${projectDir}/test_data/Sample_test.txt"
    outdir = "results_test"
    
    // Use minimal test references
    transcript_fasta = "${projectDir}/test_refs/test_transcripts.fa"
    gtf = "${projectDir}/test_refs/test_genes.gtf"
    reference = "${projectDir}/test_refs/gene_ref.txt"
    
    // Pipeline settings
    pseudo_aligner = 'kallisto'
    seq_mode = 'SE'  // Single-end to match our test data
    
    // Skip resource-heavy steps for testing
    skip_fastqc = true
    skip_trimming = true
    
    // Keep DESeq2 and MultiQC for QC plots
    skip_multiqc = false
    
    // Kallisto settings
    extra_kallisto_quant_args = '-b 10 --single-overhang'  // Small bootstrap for testing
    kallisto_quant_fraglen = 200
    kallisto_quant_fraglen_sd = 200
    
    // Resource limits  
    max_cpus = 2
    max_memory = '8.GB'  // Increased for kallisto index
    max_time = '2.h'
    
    // Container settings
    singularity.enabled = false
    docker.enabled = false  // Let user choose profile
    conda.enabled = true    // Fallback to conda
}

process {
    // Override memory requirements for testing with more realistic limits
    withName: 'KALLISTO_INDEX' {
        memory = { 4.GB * task.attempt }
        cpus = 1
        time = '30.min'
    }
    withName: 'KALLISTO_QUANT' {
        memory = { 2.GB * task.attempt }
        cpus = 1  
        time = '15.min'
    }
    withName: 'DESEQ2_NORM_QC' {
        memory = { 2.GB * task.attempt }
        cpus = 1
        time = '20.min'
    }
    withName: 'MULTIQC' {
        memory = '1.GB'
        cpus = 1
        time = '10.min'
    }
}