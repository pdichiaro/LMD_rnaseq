/*
 * Production-ready test configuration for LMDseq pipeline
 * Use with real compute resources
 */

params {
    input = "${projectDir}/assets/Sample.txt"  // Use original sample sheet
    outdir = "results_production_test"
    
    // Use real genome references (requires good internet)
    genome = 'GRCh38'  // or provide custom references
    
    // Pipeline settings optimized for LMD samples
    pseudo_aligner = 'kallisto'
    seq_mode = 'SE'  // Most LMD samples are single-end
    
    // Enable all QC steps
    skip_fastqc = false
    skip_trimming = false  
    skip_multiqc = false
    
    // Kallisto settings for production
    extra_kallisto_quant_args = '-b 50 --single-overhang'  // Standard bootstrap
    kallisto_quant_fraglen = 200
    kallisto_quant_fraglen_sd = 200
    
    // DESeq2 QC parameters
    min_reads = 10
    
    // Production resource limits
    max_cpus = 16
    max_memory = '64.GB'  // Sufficient for human genome
    max_time = '8.h'
}

process {
    // Production resource allocation
    withName: 'KALLISTO_INDEX' {
        memory = { 36.GB * task.attempt }  // Standard requirement
        cpus = 4
        time = '2.h'
    }
    withName: 'KALLISTO_QUANT' {
        memory = { 8.GB * task.attempt }
        cpus = 4
        time = '1.h'  
    }
    withName: 'DESEQ2_NORM_QC' {
        memory = { 16.GB * task.attempt }
        cpus = 2
        time = '2.h'
    }
    withName: 'MULTIQC' {
        memory = { 4.GB * task.attempt }
        cpus = 2
        time = '30.min'
    }
    
    // Error handling
    errorStrategy = 'retry'
    maxRetries = 2
}